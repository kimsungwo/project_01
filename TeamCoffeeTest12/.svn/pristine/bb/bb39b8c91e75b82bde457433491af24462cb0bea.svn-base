package com.teamcoffee.buy.controller;

import javax.annotation.Resource;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;

import com.teamcoffee.buy.service.BuyService;
import com.teamcoffee.buy.vo.BuyDetailVO;
import com.teamcoffee.cafe.service.CafeService;
import com.teamcoffee.menu.service.MenuService;

@Controller
@RequestMapping("/buy")
public class BuyController {
	@Resource(name = "buyService")
	private BuyService buyService;
	
	@Resource(name = "menuService")
	private MenuService menuService;
	
	@Resource(name = "cafeService")
	private CafeService cafeService;
	
	@PostMapping("/buyConfirm")
	public String buyConfirm(BuyDetailVO buyDetailVO, Model model) {
		model.addAttribute("menuInfo", buyService.selectMenuAll(buyDetailVO));
		if(buyDetailVO.getRequiredOptions() != null) {
			model.addAttribute("menuOptionReq", buyService.selectRequiredOptions(buyDetailVO));
		}
		if(buyDetailVO.getSelectionOptions() != null) {
			model.addAttribute("menuOptionSel", buyService.selectSelectionOptions(buyDetailVO));
		}
		return "buy/buy_confirm";
	}
	
}
