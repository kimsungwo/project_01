<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   <!-- 테이블에 대한 모든 SQL문을 mapper태그 안에 작성 -->
<mapper namespace="sampleMapper">
	<!--  먼저 resultMap을 만들어준다.-->
	<!-- resultMap : 쿼리 실행결과 나온 데이터를 자바로 가져올 수 있도록 자바클래스와 결과를 연결(매핑)시켜주는 작업 -->
	<!--  resultmap작성 -->
	<resultMap type="com.spring.vo.SampleVO" id="Sample">
		<id column="DEPTNO" 	property="deptno"/>
		<result column="DNAME"  property="dName"/>
		<result column="LOC" 	property="loc"/>
	</resultMap>
	<insert id="insertDept">
		INSERT INTO TEST_DEPARTMENT (
			DEPTNO
			, DNAME
			, LOC
		) VALUES (
			(SELECT 'DEPT'||LPAD(NVL(MAX(TO_NUMBER(SUBSTR(DEPTNO,6)))+1,1),3,'0') FROM TEST_DEPARTMENT ) 
            , #{dName}
            , #{loc}
        )
	</insert>
	
	<select id="selectDeptList" resultMap="Sample">
		SELECT DEPTNO
 		   , DNAME
 		   , LOC
		FROM TEST_DEPARTMENT
		ORDER BY DEPTNO
	</select>
	<select id="selectDeptNameList" resultMap="Sample">
		SELECT DEPTNO
 		   , DNAME
		FROM TEST_DEPARTMENT
	</select>
</mapper>

